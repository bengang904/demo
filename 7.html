<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ambient Light Sensor Demo</title>
</head>
<body>
  <h1>光照强度读取</h1>
  <p>当前光照强度: <span id="lux">等待中...</span> lux</p>

  <script>
    if ('AmbientLightSensor' in window) {
      try {
        const sensor = new AmbientLightSensor();
        sensor.addEventListener('reading', () => {
          document.getElementById('lux').textContent = sensor.illuminance.toFixed(2);
        });
        sensor.addEventListener('error', event => {
          console.error(`光照传感器错误: ${event.error.name}`);
        });
        sensor.start();
      } catch (err) {
        console.error('启动光照传感器失败:', err);
      }
    } else {
      document.getElementById('lux').textContent = '不支持 Ambient Light Sensor API';
    }
  </script>
</body>
</html>
