<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全景图</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <style>
        body, html {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background-color: black;
        }

        #panorama {
            width: 100%;
            height: 100%;
            position: absolute;
        }
    </style>
</head>
<body>

    <!-- 这个容器用于显示全景图 -->
    <div id="panorama"></div>

    <!-- 引入pannellum库 -->
    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <script>
        // 获取 URL 中的图像文件参数（例如：?image=pano.webp）
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // 获取图像文件路径
        let imageFile = getQueryParam('image');

        // 如果没有图像参数，使用默认的全景图
        if (!imageFile) {
            imageFile = 'pano.webp'; // 默认全景图路径
        }

        // 初始化全景图的显示器
        let viewer = pannellum.viewer('panorama', {
            "type": "equirectangular",
            "panorama": imageFile, // 使用从 URL 获取的图像文件
            "autoLoad": true,
            "showControls": false, // 是否显示控制按钮
            "mouseZoom": true,      // 支持鼠标滚轮缩放
            "dragMode": "drag",     // 鼠标拖动模式
            "hfov": 100,           // 水平视场
            "minYaw": -180,        // 最小偏航角
            "maxYaw": 180,         // 最大偏航角
            "pitch": 0,            // 初始俯仰角
            "maxPitch": 90,        // 最大俯仰角
            "minPitch": -90        // 最小俯仰角
        });

        // 检测设备是否为手机，并自动进入全屏
        if (/Mobi|Android/i.test(navigator.userAgent)) {
            // 直接进入全屏模式
            enterFullscreen();
        }

        // 进入全屏模式的函数
        function enterFullscreen() {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) { // Firefox
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) { // Chrome, Safari and Opera
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { // IE/Edge
                document.documentElement.msRequestFullscreen();
            }
        }
    </script>
</body>
</html>
