<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全景图展示</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <style>
        body, html {
            height: 100%;
            margin: 0;
            overflow: hidden;
            background-color: black;
        }

        #panorama {
            width: 100%;
            height: 100%;
            position: absolute;
        }

        /* 用于全屏模式的弹窗样式 */
        .fullscreen-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            text-align: center;
            font-size: 24px;
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>

    <!-- 这个容器用于显示全景图 -->
    <div id="panorama"></div>

    <!-- 全屏提示弹窗 -->
    <div class="fullscreen-popup" id="fullscreenPopup">
        请旋转设备到横屏模式查看全景图。
    </div>

    <!-- 引入pannellum库 -->
    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <script>
        // 初始化全景图的显示器
        let viewer = pannellum.viewer('panorama', {
            "type": "equirectangular",
            "panorama": "pano.webp", // 你的全景图文件
            "autoLoad": true,
            "showControls": false, // 是否显示控制按钮
            "mouseZoom": true,      // 支持鼠标滚轮缩放
            "dragMode": "drag",     // 鼠标拖动模式
            "hfov": 100,           // 水平视场
            "minYaw": -180,        // 最小偏航角
            "maxYaw": 180,         // 最大偏航角
            "pitch": 0,            // 初始俯仰角
            "maxPitch": 90,        // 最大俯仰角
            "minPitch": -90        // 最小俯仰角
        });

        // 检测设备是否为手机，并提示全屏
        if (/Mobi|Android/i.test(navigator.userAgent)) {
            let fullscreenPopup = document.getElementById('fullscreenPopup');
            fullscreenPopup.style.display = 'flex';

            // 监听设备横竖屏变化，自动切换全屏模式
            window.addEventListener('orientationchange', function() {
                if (window.orientation === 90 || window.orientation === -90) {
                    fullscreenPopup.style.display = 'none';
                    // 设置为全屏模式
                    enterFullscreen();
                } else {
                    fullscreenPopup.style.display = 'flex'; // 如果竖屏，再次显示提示
                }
            });
        }

        // 进入全屏模式的函数
        function enterFullscreen() {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) { // Firefox
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) { // Chrome, Safari and Opera
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) { // IE/Edge
                document.documentElement.msRequestFullscreen();
            }
        }
    </script>

</body>
</html>
